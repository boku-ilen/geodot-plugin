<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geodot Plugin: NativeLayer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Geodot Plugin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classNativeLayer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">NativeLayer Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad9403c716d4a5aa8c694d40b6cdb2319"><td class="memItemLeft" align="right" valign="top"><a id="ad9403c716d4a5aa8c694d40b6cdb2319" name="ad9403c716d4a5aa8c694d40b6cdb2319"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>NativeLayer</b> (OGRLayer *new_layer)</td></tr>
<tr class="separator:ad9403c716d4a5aa8c694d40b6cdb2319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3462f17c2221ef99cbe1d1502042dca8"><td class="memItemLeft" align="right" valign="top"><a id="a3462f17c2221ef99cbe1d1502042dca8" name="a3462f17c2221ef99cbe1d1502042dca8"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_valid</b> () const</td></tr>
<tr class="separator:a3462f17c2221ef99cbe1d1502042dca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2007dea83e8b03f62e168b95d5dd447e"><td class="memItemLeft" align="right" valign="top"><a id="a2007dea83e8b03f62e168b95d5dd447e" name="a2007dea83e8b03f62e168b95d5dd447e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>write_feature_cache_to_ram_layer</b> ()</td></tr>
<tr class="separator:a2007dea83e8b03f62e168b95d5dd447e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a034c2208bd0f19019fb5d92be1a2f7ed"><td class="memItemLeft" align="right" valign="top"><a id="a034c2208bd0f19019fb5d92be1a2f7ed" name="a034c2208bd0f19019fb5d92be1a2f7ed"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>save_override</b> ()</td></tr>
<tr class="separator:a034c2208bd0f19019fb5d92be1a2f7ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac00022e3b2ce2fbd28d5aaf72e6193bc"><td class="memItemLeft" align="right" valign="top"><a id="ac00022e3b2ce2fbd28d5aaf72e6193bc" name="ac00022e3b2ce2fbd28d5aaf72e6193bc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>save_modified_layer</b> (std::string path)</td></tr>
<tr class="separator:ac00022e3b2ce2fbd28d5aaf72e6193bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4816ae04199c21725a07a391aee0ada"><td class="memItemLeft" align="right" valign="top"><a id="ad4816ae04199c21725a07a391aee0ada" name="ad4816ae04199c21725a07a391aee0ada"></a>
<a class="el" href="structExtentData.html">ExtentData</a>&#160;</td><td class="memItemRight" valign="bottom"><b>get_extent</b> ()</td></tr>
<tr class="separator:ad4816ae04199c21725a07a391aee0ada"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57efe65cd9b14d7b1d7505b7c849e513"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classFeature.html">Feature</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNativeLayer.html#a57efe65cd9b14d7b1d7505b7c849e513">create_feature</a> ()</td></tr>
<tr class="separator:a57efe65cd9b14d7b1d7505b7c849e513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27dc724629a15428a9f8afc3ada3be0a"><td class="memItemLeft" align="right" valign="top"><a id="a27dc724629a15428a9f8afc3ada3be0a" name="a27dc724629a15428a9f8afc3ada3be0a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>add_field</b> (std::string name)</td></tr>
<tr class="separator:a27dc724629a15428a9f8afc3ada3be0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a799247fda244fb8aa71b1690d8763112"><td class="memItemLeft" align="right" valign="top"><a id="a799247fda244fb8aa71b1690d8763112" name="a799247fda244fb8aa71b1690d8763112"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>remove_field</b> (std::string name)</td></tr>
<tr class="separator:a799247fda244fb8aa71b1690d8763112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50aa749c34811d4fc9f8b5c5295f728b"><td class="memItemLeft" align="right" valign="top">std::list&lt; std::shared_ptr&lt; <a class="el" href="classFeature.html">Feature</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNativeLayer.html#a50aa749c34811d4fc9f8b5c5295f728b">get_features</a> ()</td></tr>
<tr class="separator:a50aa749c34811d4fc9f8b5c5295f728b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a114cfef9bcc6380c31c65e9d86de950c"><td class="memItemLeft" align="right" valign="top">std::list&lt; std::shared_ptr&lt; <a class="el" href="classFeature.html">Feature</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNativeLayer.html#a114cfef9bcc6380c31c65e9d86de950c">get_features_near_position</a> (double pos_x, double pos_y, double radius, int max_amount)</td></tr>
<tr class="separator:a114cfef9bcc6380c31c65e9d86de950c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1692412957586db4be77699998bf03e3"><td class="memItemLeft" align="right" valign="top">std::list&lt; std::shared_ptr&lt; <a class="el" href="classFeature.html">Feature</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNativeLayer.html#a1692412957586db4be77699998bf03e3">get_features_in_square</a> (double top_left_x, double top_left_y, double size_meters, int max_amount)</td></tr>
<tr class="separator:a1692412957586db4be77699998bf03e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af34d3d86f023058736de706af71d2968"><td class="memItemLeft" align="right" valign="top">std::list&lt; std::shared_ptr&lt; <a class="el" href="classFeature.html">Feature</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNativeLayer.html#af34d3d86f023058736de706af71d2968">get_feature_for_ogrfeature</a> (OGRFeature *feature)</td></tr>
<tr class="separator:af34d3d86f023058736de706af71d2968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65794cabe9a07d2000c6fb3752641b74"><td class="memItemLeft" align="right" valign="top"><a id="a65794cabe9a07d2000c6fb3752641b74" name="a65794cabe9a07d2000c6fb3752641b74"></a>
std::list&lt; std::shared_ptr&lt; <a class="el" href="classFeature.html">Feature</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>get_feature_by_id</b> (int id)</td></tr>
<tr class="memdesc:a65794cabe9a07d2000c6fb3752641b74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the feature corresponding to the given ID. <br /></td></tr>
<tr class="separator:a65794cabe9a07d2000c6fb3752641b74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a5e9b5d6026303f9998be78f310f718"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNativeLayer.html#a5a5e9b5d6026303f9998be78f310f718">clear_feature_cache</a> ()</td></tr>
<tr class="separator:a5a5e9b5d6026303f9998be78f310f718"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a69e70451b447db7b75f10323b7ee4e41"><td class="memItemLeft" align="right" valign="top"><a id="a69e70451b447db7b75f10323b7ee4e41" name="a69e70451b447db7b75f10323b7ee4e41"></a>
OGRLayer *&#160;</td><td class="memItemRight" valign="bottom"><b>layer</b></td></tr>
<tr class="separator:a69e70451b447db7b75f10323b7ee4e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff423b9f7d4aa60443d9ba4646362c11"><td class="memItemLeft" align="right" valign="top"><a id="aff423b9f7d4aa60443d9ba4646362c11" name="aff423b9f7d4aa60443d9ba4646362c11"></a>
OGRLayer *&#160;</td><td class="memItemRight" valign="bottom"><b>ram_layer</b></td></tr>
<tr class="separator:aff423b9f7d4aa60443d9ba4646362c11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76fa67e1aa3c535d86c9c3cf3332f990"><td class="memItemLeft" align="right" valign="top">std::map&lt; GUIntBig, std::list&lt; std::shared_ptr&lt; <a class="el" href="classFeature.html">Feature</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNativeLayer.html#a76fa67e1aa3c535d86c9c3cf3332f990">feature_cache</a></td></tr>
<tr class="separator:a76fa67e1aa3c535d86c9c3cf3332f990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a505a9239c94d3f2475ead6778efd4681"><td class="memItemLeft" align="right" valign="top"><a id="a505a9239c94d3f2475ead6778efd4681" name="a505a9239c94d3f2475ead6778efd4681"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>disk_feature_count</b></td></tr>
<tr class="separator:a505a9239c94d3f2475ead6778efd4681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad05013f37f8d6cb5db23efa38ffbdb79"><td class="memItemLeft" align="right" valign="top"><a id="ad05013f37f8d6cb5db23efa38ffbdb79" name="ad05013f37f8d6cb5db23efa38ffbdb79"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>ram_feature_count</b></td></tr>
<tr class="separator:ad05013f37f8d6cb5db23efa38ffbdb79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5a5e9b5d6026303f9998be78f310f718" name="a5a5e9b5d6026303f9998be78f310f718"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a5e9b5d6026303f9998be78f310f718">&#9670;&#160;</a></span>clear_feature_cache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NativeLayer::clear_feature_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Removes all entries from the feature cache. Make sure this is not called when features exist which need to remain synchronized (signals across different origins) </p>

</div>
</div>
<a id="a57efe65cd9b14d7b1d7505b7c849e513" name="a57efe65cd9b14d7b1d7505b7c849e513"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57efe65cd9b14d7b1d7505b7c849e513">&#9670;&#160;</a></span>create_feature()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classFeature.html">Feature</a> &gt; NativeLayer::create_feature </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create a new feature on the in-RAM layer corresponding to the actual disk layer. No changes are made on the original layer, so that layer can be opened as read-only. The exact type of the returned feature corresponds to the layer's geometry type. </p>

</div>
</div>
<a id="af34d3d86f023058736de706af71d2968" name="af34d3d86f023058736de706af71d2968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af34d3d86f023058736de706af71d2968">&#9670;&#160;</a></span>get_feature_for_ogrfeature()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt; std::shared_ptr&lt; <a class="el" href="classFeature.html">Feature</a> &gt; &gt; NativeLayer::get_feature_for_ogrfeature </td>
          <td>(</td>
          <td class="paramtype">OGRFeature *&#160;</td>
          <td class="paramname"><em>feature</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Returns the feature corresponding to the given OGRFeature: Either the cached one, or if there is none, a new one (then placed within the cache). Takes ownership of the passed OGRFeature, deleting it if it is not required thanks to a cache hit, and passing it on to the new <a class="el" href="classFeature.html">Feature</a> otherwise. </p>

</div>
</div>
<a id="a50aa749c34811d4fc9f8b5c5295f728b" name="a50aa749c34811d4fc9f8b5c5295f728b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50aa749c34811d4fc9f8b5c5295f728b">&#9670;&#160;</a></span>get_features()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt; std::shared_ptr&lt; <a class="el" href="classFeature.html">Feature</a> &gt; &gt; NativeLayer::get_features </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Return all features, regardless of what the geometry is (or if there even is geometry). Note that this means that no geometry will be available in those features - this should only be used for attributes. </p>

</div>
</div>
<a id="a1692412957586db4be77699998bf03e3" name="a1692412957586db4be77699998bf03e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1692412957586db4be77699998bf03e3">&#9670;&#160;</a></span>get_features_in_square()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt; std::shared_ptr&lt; <a class="el" href="classFeature.html">Feature</a> &gt; &gt; NativeLayer::get_features_in_square </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>top_left_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>top_left_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>size_meters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_amount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Return all features, regardless of what the geometry is, which somehow overlap with the rectangle created by the given top-left position and size. Parts of the geometry outside the rectangle are not cut, so features may extend outside of the circle. To prevent hangups from unexpectedly many features, a maximum amount can be given so that the remaining features are skipped. </p>

</div>
</div>
<a id="a114cfef9bcc6380c31c65e9d86de950c" name="a114cfef9bcc6380c31c65e9d86de950c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a114cfef9bcc6380c31c65e9d86de950c">&#9670;&#160;</a></span>get_features_near_position()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt; std::shared_ptr&lt; <a class="el" href="classFeature.html">Feature</a> &gt; &gt; NativeLayer::get_features_near_position </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>pos_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>pos_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_amount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Return all features, regardless of what the geometry is, which somehow overlap with the circle created by the given position and radius. Parts of the geometry outside the circle are not cut, so features may extend outside of the circle. To prevent hangups from unexpectedly many features, a maximum amount can be given so that the remaining features are skipped. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a76fa67e1aa3c535d86c9c3cf3332f990" name="a76fa67e1aa3c535d86c9c3cf3332f990"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76fa67e1aa3c535d86c9c3cf3332f990">&#9670;&#160;</a></span>feature_cache</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;GUIntBig, std::list&lt;std::shared_ptr&lt;<a class="el" href="classFeature.html">Feature</a>&gt; &gt; &gt; NativeLayer::feature_cache</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Keeps track of all features which are in use due to having been returned, in order to ensure that we don't return two different <a class="el" href="classFeature.html">Feature</a> instances pointing to the same data. That way, updates to features don't need to be written anywhere: they exist within the Features of the feature cache.</p>
<p >A list of <a class="el" href="classFeature.html">Feature</a> pointers is used for the case of multi-features (e.g. MULTILINESTRING), where one OGRFeature corresponds to multiple of our Features. Usually though, each list has only one element. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/github/workspace/src/vector-extractor/<a class="el" href="NativeLayer_8h_source.html">NativeLayer.h</a></li>
<li>/github/workspace/src/vector-extractor/NativeLayer.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
